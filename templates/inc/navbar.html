{% extends 'inherit.html' %}
{% load static %}

{% block head %}


{% endblock %}
{% block body %}


    {#  upper navbar  #}
    <div class="border-bottom">
        <div class="d-flex justify-content-between border-right p-2" style="width: 80%;margin: auto">
            <p class="m-0 align-self-center text1" >GBP</p>
            <div>
                {% if user.is_superuser %}
                    <a href="{% url 'adminPanel:admin-home' %}" class="align-self-center pr-2 default_a text1">ADMIN PANEL</a>
                {% endif %}
                {% if user.is_authenticated %}
                <a href="{% url 'logout' %}" class="align-self-center pr-2 default_a text1">LOGOUT</a>

                {% else %}
                    <a href="{% url 'login' %}" class="align-self-center default_a text1">LOGIN</a>
                    <a href="{% url 'signup' %}" class="align-self-center default_a px-2 text1">REGISTER</a>

                {% endif %}
                <a href="{% url 'wishlist' %}" class="default_a align-self-center pr-2 text1">WISH LIST</a>
            </div>
        </div>
    </div>


    {#  lower navbar  #}
    <div class="d-flex justify-content-around p-2 " style="width: 90%;margin: auto">
        <div>
            <img onclick="home()" src="{% static 'imgs/ipad_icon_retina.png' %}" style="cursor: pointer" alt="Ziegal Logo">
        </div>
        <a href="{% url 'dual-sims' %}" class="align-self-center default_a">Dual Sims</a>
        <a href="{% url 'online-shop' %}" class="align-self-center default_a">Online Shop</a>
        <a href="{% url 'monthly-deals' %}" class="align-self-center default_a">Pay Monthly Deals</a>
        <a href="{% url 'broadband_deals' %}" class="align-self-center default_a">BroadBands Deals</a>
        <a href="{% url 'z-wifi' %}" class="align-self-center default_a">Z-Wifi</a>
        <a href="{% url 'cart' %}" class="align-self-center default_a">
            <img src="{% static 'imgs/cart2.svg' %}" height="20px" alt=""></a>
        {% if user.is_authenticated %}
        <small class="bg-dark text-white px-1" style="border-radius:50% ;height: fit-content;position: relative;left: -3%" id="count">{{ count }}</small>
        {% endif %}
        <div class="d-flex">
            <input onchange="search(event)" type="text" placeholder="Search....." class="align-self-center form-control align-self-center" style="display: inline-block">
            <a class="btn btn-dark text-white align-self-center py-2"><i class="fas fa-search"></i></a>
        </div>
    </div>

{% endblock %}


<script defer>
{% block script %}
    function home(){
        const base_url = location.origin
        console.log(base_url)
        location.replace(`${base_url}`)

    }

    function count(){
        const element = document.getElementById('count')
        fetch(`${location.origin}/count/`)
        .then((res)=>{
            return res.json()
        })
        .then((result)=>{
            element.innerHTML = result.count
        })
    }


    function search(e){
        console.log(e.target.value)
        const aTag = e.target.nextElementSibling
        aTag.href = `${location.origin}/search/${e.target.value}/`
    }
{% endblock %}
</script>